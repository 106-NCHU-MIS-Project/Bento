<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
    <link rel="stylesheet" href="/css/main.css">

    <script src="./qrcodeJs/jquery.qrcode.js"></script>
    <script src="./qrcodeJs/qrcode.js"></script>


    <title>QRcode</title>
<style media="screen">
  body{
    text-align: center;
  }
</style>

  </head>
  <body>


    <!-- navbar -->
<div id="navbar"></div>
<script type="text/javascript">
    var ajax = new XMLHttpRequest();
    ajax.open("GET", "/navbar.html", false);
    ajax.send();
    document.getElementById("navbar").innerHTML += ajax.responseText;
</script>
<script type="text/javascript">$(".button-collapse").sideNav();</script>

  <!-- navbar -->



<br>

  <div class="container" style="text-align:center;">
    <div class="card">
        <div id="responsive-img">
        <div id="qrcode"></div>
        </div>
      </div>
    </div>
        <button type="button" name="button" class="btn" onclick="newQRcode()">Random</button>
<br><br>

    <a id="QRString" href='../Order/JoinOrder.html' style="font-weight:bold;font-size:30px;"></a>
<br><span>點我進入</span>
<br>

    <script type="text/javascript">
newQRcode();

function randomString(length, chars) {
    var mask = '';
      if (chars.indexOf('a') > -1) mask += 'abcdefghijklmnopqrstuvwxyz';
      if (chars.indexOf('A') > -1) mask += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      if (chars.indexOf('#') > -1) mask += '0123456789';
      if (chars.indexOf('!') > -1) mask += '~`!@#$%^&*()_+-={}[]:";\'<>?,./|\\';
      var result = '';
      for (var i = length; i > 0; --i) result += mask[Math.floor(Math.random() * mask.length)];
      return result;
    }


function newQRcode(){

  document.getElementById("qrcode").innerHTML="";

  var randomQRcode = randomString(2,'A')+randomString(4,'#');

  jQuery('#qrcode').qrcode({width:"300" ,height:"300" ,text: randomQRcode});

  document.getElementById("QRString").innerHTML = randomQRcode;
  document.getElementById("QRString").href='../Order/MainOrder.html?'+randomQRcode;
}

</script>


  </body>
</html>
